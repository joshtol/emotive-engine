# Deploy examples to GitHub Pages
# Triggered on push to main branch

name: Deploy Examples to GitHub Pages

on:
  push:
    branches: [main]
  workflow_dispatch: # Allow manual trigger

# Sets permissions for GITHUB_TOKEN to deploy to Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment
concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Build
        run: npm run build

      - name: Prepare Pages directory
        run: |
          mkdir -p _pages

          # Copy dist files
          cp -r dist _pages/dist

          # Copy examples - use site/public/examples for 3D (bundled imports)
          # and examples/ for 2D (which don't need bundled Three.js)
          mkdir -p _pages/examples
          cp -r examples/2d _pages/examples/2d 2>/dev/null || true
          cp -r examples/llm-integration _pages/examples/llm-integration 2>/dev/null || true
          cp examples/*.css _pages/examples/ 2>/dev/null || true
          # 3D examples from site/public use bundled imports that work in browsers
          cp -r site/public/examples/3d _pages/examples/3d

          # Copy assets needed by examples
          cp -r assets _pages/assets 2>/dev/null || true

          # Copy HDRI files for environment mapping
          cp -r public/hdri _pages/hdri 2>/dev/null || true

          # 2D examples reference site/public/emotive-engine.js - create that path
          # Must use UMD build for regular <script> tag loading (not ES module)
          mkdir -p _pages/site/public
          cp dist/emotive-mascot.umd.js _pages/site/public/emotive-engine.js

          # 3D examples reference /emotive-engine-3d.bundled.js at root
          # Copy the bundled version (includes Three.js) for static HTML demos
          cp dist/emotive-mascot-3d.bundled.js _pages/emotive-engine-3d.bundled.js

          # Create index.html that lists all examples
          cat > _pages/index.html << 'INDEXEOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Emotive Engine - Interactive Demo Gallery</title>
            <meta name="description" content="Emotional AI mascot engine with 2D canvas and 3D WebGL support. Interactive demos showcasing emotions, gestures, and visual effects.">
            <style>
              :root {
                --pink: #DD4A9A;
                --blue: #4090CE;
                --teal: #84CFC5;
                --bg-dark: #0a0a0a;
                --bg-card: rgba(30, 30, 35, 0.8);
                --text: #F2F1F1;
                --text-muted: #888;
              }

              * { margin: 0; padding: 0; box-sizing: border-box; }

              body {
                font-family: system-ui, -apple-system, sans-serif;
                background: var(--bg-dark);
                color: var(--text);
                min-height: 100vh;
                overflow-x: hidden;
              }

              /* ============================================
                 PAGE CONTENT
                 ============================================ */

              .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 40px 24px;
                position: relative;
                z-index: 1;
              }

              /* Hero Section - Compact to show examples on landing */
              .hero {
                text-align: center;
                padding: 60px 20px 40px;
                position: relative;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                overflow: hidden;
              }

              /* Gradient orb glow behind logo */
              .hero::after {
                content: '';
                position: absolute;
                width: 500px;
                height: 500px;
                border-radius: 50%;
                background: radial-gradient(circle,
                  rgba(221, 74, 154, 0.12) 0%,
                  rgba(64, 144, 206, 0.08) 40%,
                  transparent 70%
                );
                filter: blur(50px);
                animation: orbPulse 6s ease-in-out infinite;
                pointer-events: none;
              }

              @keyframes orbPulse {
                0%, 100% { transform: scale(1); opacity: 0.5; }
                50% { transform: scale(1.05); opacity: 0.7; }
              }

              /* Main logotype container */
              .hero-logo-container {
                position: relative;
                z-index: 1;
                animation: logoEnter 1s ease-out;
              }

              @keyframes logoEnter {
                from { opacity: 0; transform: translateY(20px) scale(0.98); }
                to { opacity: 1; transform: translateY(0) scale(1); }
              }

              /* SVG logotype with animated gradient */
              .hero-logotype {
                width: min(500px, 80vw);
                height: auto;
                filter: drop-shadow(0 0 30px rgba(221, 74, 154, 0.25))
                        drop-shadow(0 0 60px rgba(64, 144, 206, 0.15));
              }

              .hero-tagline {
                font-size: clamp(0.95rem, 2vw, 1.1rem);
                color: rgba(255, 255, 255, 0.6);
                max-width: 480px;
                margin: 20px auto 28px;
                line-height: 1.6;
                position: relative;
                z-index: 1;
                animation: fadeInUp 0.8s ease-out 0.2s both;
              }

              @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
              }

              .hero-badges {
                display: flex;
                gap: 12px;
                justify-content: center;
                flex-wrap: wrap;
                position: relative;
                z-index: 1;
                animation: fadeInUp 1s ease-out 0.5s both;
              }

              .badge {
                padding: 10px 20px;
                border-radius: 24px;
                font-size: 0.85rem;
                font-weight: 500;
                border: 1px solid;
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
              }

              .badge:hover {
                transform: translateY(-2px);
              }

              .badge.webgl {
                background: rgba(221, 74, 154, 0.12);
                border-color: rgba(221, 74, 154, 0.35);
                color: var(--pink);
                box-shadow: 0 4px 20px rgba(221, 74, 154, 0.15);
              }
              .badge.canvas {
                background: rgba(64, 144, 206, 0.12);
                border-color: rgba(64, 144, 206, 0.35);
                color: var(--blue);
                box-shadow: 0 4px 20px rgba(64, 144, 206, 0.15);
              }
              .badge.ai {
                background: rgba(132, 207, 197, 0.12);
                border-color: rgba(132, 207, 197, 0.35);
                color: var(--teal);
                box-shadow: 0 4px 20px rgba(132, 207, 197, 0.15);
              }

              /* Section Headers */
              .section {
                margin-bottom: 60px;
              }

              .section-header {
                display: flex;
                align-items: center;
                gap: 16px;
                margin-bottom: 24px;
              }

              .section-icon {
                width: 40px;
                height: 40px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
              }

              .section-icon.webgl { background: linear-gradient(135deg, var(--pink), var(--blue)); }
              .section-icon.canvas { background: linear-gradient(135deg, var(--blue), var(--teal)); }
              .section-icon.ai { background: linear-gradient(135deg, var(--teal), var(--pink)); }

              .section h2 {
                font-size: 1.5rem;
                font-weight: 600;
                color: var(--text);
              }

              .section-count {
                color: var(--text-muted);
                font-size: 0.9rem;
                margin-left: auto;
              }

              /* Bento Grid */
              .bento-grid {
                display: grid;
                grid-template-columns: repeat(12, 1fr);
                gap: 16px;
              }

              /* Card Styles */
              .card {
                position: relative;
                background: var(--bg-card);
                border: 1px solid rgba(255, 255, 255, 0.06);
                border-radius: 16px;
                overflow: hidden;
                text-decoration: none;
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                display: flex;
                flex-direction: column;
              }

              .card:hover {
                transform: translateY(-4px) scale(1.02);
                border-color: rgba(221, 74, 154, 0.4);
                box-shadow:
                  0 20px 40px rgba(0, 0, 0, 0.4),
                  0 0 60px rgba(221, 74, 154, 0.15);
              }

              /* Card sizes for bento */
              .card.featured { grid-column: span 8; }
              .card.medium { grid-column: span 4; }
              .card.small { grid-column: span 4; }

              /* Preview area with placeholder */
              .card-preview {
                position: relative;
                height: 180px;
                background: linear-gradient(135deg, rgba(30,30,35,1) 0%, rgba(20,20,25,1) 100%);
                overflow: hidden;
              }

              .card.featured .card-preview { height: 280px; }

              .card-preview img, .card-preview video {
                width: 100%;
                height: 100%;
                object-fit: cover;
                opacity: 0.9;
                transition: all 0.4s ease;
              }

              .card:hover .card-preview img,
              .card:hover .card-preview video {
                opacity: 1;
                transform: scale(1.05);
              }

              /* Placeholder for missing images */
              .preview-placeholder {
                position: absolute;
                inset: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, rgba(221, 74, 154, 0.1) 0%, rgba(64, 144, 206, 0.1) 100%);
                color: var(--text-muted);
                font-size: 0.8rem;
                text-align: center;
                padding: 20px;
              }

              .preview-placeholder .icon {
                font-size: 3rem;
                margin-bottom: 12px;
                opacity: 0.5;
              }

              /* Glow effect on hover */
              .card::before {
                content: '';
                position: absolute;
                inset: 0;
                background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                  rgba(221, 74, 154, 0.15) 0%, transparent 50%);
                opacity: 0;
                transition: opacity 0.3s;
                pointer-events: none;
                z-index: 1;
              }

              .card:hover::before { opacity: 1; }

              /* Card content */
              .card-content {
                padding: 20px;
                flex: 1;
                display: flex;
                flex-direction: column;
              }

              .card-meta {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 12px;
              }

              .card-category {
                font-size: 0.7rem;
                text-transform: uppercase;
                letter-spacing: 1px;
                padding: 4px 10px;
                border-radius: 4px;
                font-weight: 600;
              }

              .card-category.webgl { background: rgba(221, 74, 154, 0.2); color: var(--pink); }
              .card-category.canvas { background: rgba(64, 144, 206, 0.2); color: var(--blue); }
              .card-category.ai { background: rgba(132, 207, 197, 0.2); color: var(--teal); }

              .complexity {
                font-size: 0.75rem;
                color: var(--text-muted);
                margin-left: auto;
              }

              .complexity .star { color: #FFD700; }
              .complexity .star.empty { opacity: 0.3; }

              .card h3 {
                font-size: 1.2rem;
                font-weight: 600;
                color: var(--text);
                margin-bottom: 8px;
              }

              .card.featured h3 { font-size: 1.5rem; }

              .card p {
                font-size: 0.9rem;
                color: var(--text-muted);
                line-height: 1.5;
                flex: 1;
              }

              .card-tags {
                display: flex;
                gap: 6px;
                flex-wrap: wrap;
                margin-top: 16px;
              }

              .tag {
                font-size: 0.7rem;
                padding: 4px 8px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 4px;
                color: var(--text-muted);
              }

              /* Play indicator */
              .play-indicator {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 60px;
                height: 60px;
                background: rgba(221, 74, 154, 0.9);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transition: all 0.3s ease;
                z-index: 2;
              }

              .play-indicator::after {
                content: '';
                border-style: solid;
                border-width: 10px 0 10px 16px;
                border-color: transparent transparent transparent white;
                margin-left: 4px;
              }

              .card:hover .play-indicator {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
              }

              /* Footer */
              .footer {
                text-align: center;
                padding: 40px 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.06);
                margin-top: 40px;
              }

              .footer-links {
                display: flex;
                gap: 24px;
                justify-content: center;
                margin-bottom: 16px;
              }

              .footer-links a {
                color: var(--text-muted);
                text-decoration: none;
                font-size: 0.9rem;
                transition: color 0.2s;
              }

              .footer-links a:hover { color: var(--pink); }

              .footer-copy {
                color: var(--text-muted);
                font-size: 0.8rem;
              }

              /* Responsive */
              @media (max-width: 900px) {
                .card.featured, .card.medium, .card.small { grid-column: span 6; }
              }

              @media (max-width: 600px) {
                .card.featured, .card.medium, .card.small { grid-column: span 12; }
                .bento-grid { gap: 12px; }
                .card-preview { height: 160px; }
                .card.featured .card-preview { height: 200px; }

                /* Smaller hero on mobile */
                .hero { padding: 40px 16px 32px; }
                .hero::after { width: 280px; height: 280px; filter: blur(35px); }
                .hero-logotype { width: min(300px, 85vw); }
                .hero-tagline { font-size: 0.9rem; margin: 14px auto 20px; }
                .hero-badges { gap: 8px; }
                .badge { padding: 7px 12px; font-size: 0.75rem; }
              }
            </style>
          </head>
          <body>
            <div class="container">
              <!-- Hero -->
              <header class="hero">
                <div class="hero-logo-container">
                  <svg class="hero-logotype" viewBox="0 0 920 316" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                      <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#DD4A9A">
                          <animate attributeName="stop-color" values="#DD4A9A;#667eea;#4090CE;#DD4A9A" dur="8s" repeatCount="indefinite"/>
                        </stop>
                        <stop offset="50%" style="stop-color:#667eea">
                          <animate attributeName="stop-color" values="#667eea;#4090CE;#84CFC5;#667eea" dur="8s" repeatCount="indefinite"/>
                        </stop>
                        <stop offset="100%" style="stop-color:#4090CE">
                          <animate attributeName="stop-color" values="#4090CE;#84CFC5;#DD4A9A;#4090CE" dur="8s" repeatCount="indefinite"/>
                        </stop>
                      </linearGradient>
                    </defs>
                    <!-- Text paths with animated gradient -->
                    <path fill="url(#logoGradient)" fill-rule="evenodd" d="m679.2 78c-1.2 1.1-2.7 3.2-3.3 4.8-0.6 1.5-0.8 4.2-0.5 6 0.4 1.9 1.8 4.2 3.6 5.7 2.1 1.8 4.2 2.5 7.2 2.5 2.8 0.1 5.3-0.6 7-2 1.6-1.1 3.2-3.5 3.6-5.2 0.5-1.8 0.5-4.7 0.1-6.3-0.5-1.6-2-4-3.4-5.2-1.9-1.7-3.7-2.3-7.3-2.3-3.4 0-5.4 0.6-7 2zm-44.2 18v8h-8v17h8c0.5 34.7 0.6 35.7 3 39.7 1.5 2.6 4.1 5.2 6.5 6.4 2.8 1.5 6.6 2.4 12.8 2.8l8.7 0.6v-17.5c-6.2 0-8.9-0.4-10-1-1.9-0.9-2-2-2-16v-15h12v-17h-12v-16h-19zm-238.5 7.9c-2.2 0.5-5.8 1.8-8 2.8-2.2 1.1-5.9 4.2-8.3 6.9-3.1 3.6-4.9 6.8-6.4 11.9-1.6 5.5-2 8.5-1.5 14 0.3 3.9 1.3 9 2.1 11.5 0.8 2.5 3.5 6.8 5.9 9.5 2.8 3.2 6.3 5.8 9.8 7.4 3 1.3 7.9 2.6 10.9 2.9 3.5 0.3 7.5-0.1 11-1.1 3-0.9 7.4-3 9.7-4.6 2.4-1.7 5.6-5.5 7.3-8.3 1.6-2.9 3-6.1 3-7 0-1.6-1.1-1.8-9.5-1.8-9.1 0-9.6 0.1-11.8 2.8-1.3 1.5-3.8 3-5.5 3.5-2.1 0.4-4.4 0.2-6.7-0.8-1.9-0.8-4.1-2.5-4.9-3.7-0.8-1.3-1.7-3.5-2-5l-0.6-2.8h43.5c-1-12.8-2.1-17.4-3.7-21-1.4-3-3.8-7-5.4-8.8-1.6-1.9-5.2-4.5-7.9-5.8-2.8-1.2-7.7-2.5-11-2.8-3.3-0.3-7.8-0.1-10 0.3zm1.9 16.6c1.7-0.8 3.7-1.4 4.3-1.5 0.7 0 2.8 0.6 4.5 1.4 1.8 0.7 4.1 2.2 5 3.2 0.9 1.1 1.9 3.1 2.8 7.4h-12c-8.9 0-12-0.3-12-1.2 0-0.7 1-2.8 2.2-4.6 1.2-1.8 3.6-3.9 5.2-4.7zm183.6-16.4c-2.5 0.5-6.7 2.2-9.4 3.7-2.7 1.5-6 4.1-7.4 5.7-1.4 1.6-3.7 5.5-5.1 8.5-2.2 4.7-2.6 6.9-2.6 15 0 8.1 0.4 10.2 3 15.9 1.8 3.7 4.7 7.9 7 9.9 2.2 2 5.8 4.4 8 5.3 2.2 1 6.5 2.1 9.5 2.5 3.5 0.4 7.7 0.1 11.5-0.7 3.3-0.7 8-2.7 10.5-4.4 2.4-1.6 5.9-5 7.8-7.5 1.8-2.5 4.1-7 4.9-10 1.1-3.7 1.4-8.1 1.1-13.5-0.3-4.9-1.2-9.7-2.4-12.5-1.1-2.5-3.8-6.5-6-8.8-2.1-2.4-6.1-5.4-8.9-6.7-2.8-1.3-7.7-2.6-11-2.9-3.3-0.3-8 0-10.5 0.5zm0.8 18.7c1.5-1 4.2-1.8 6-1.8 1.7 0 4.5 0.7 6.2 1.5 1.8 0.9 3.8 3.2 5 5.8 1.1 2.3 2 6.2 2 8.7 0 2.5-0.8 6.3-1.8 8.5-1 2.2-2.9 4.8-4.3 5.8-1.4 1-4.2 1.7-6.6 1.7-2.4 0-5.2-0.4-6.3-1-1.1-0.6-3-2.7-4.2-4.7-1.7-2.9-2.2-5.4-2.2-10.3 0-4.4 0.6-7.5 1.7-9.5 1-1.6 3-3.8 4.5-4.7zm216.7-18.9c-2.2 0.5-5.8 1.8-8 2.8-2.2 1.1-5.9 4.2-8.3 6.9-2.3 2.7-5 7.2-6 9.9-1.1 3.2-1.7 8.1-1.7 13.5 0 5.4 0.6 10.4 1.7 13.5 0.9 2.8 3.7 7.3 6.1 10 2.8 3.2 6.3 5.8 9.8 7.4 3 1.3 7.9 2.6 10.9 2.9 3.5 0.3 7.5-0.1 11-1.1 3-0.9 7.4-3 9.8-4.6 2.3-1.7 5.5-5.5 7.2-8.4 1.6-2.8 3-6 3-7 0-1.5-1.1-1.7-9.5-1.7-9.1 0-9.6 0.1-11.8 2.7-1.3 1.6-3.8 3.1-5.5 3.5-2.1 0.5-4.4 0.3-6.7-0.7-1.9-0.8-4.1-2.5-4.9-3.8-0.8-1.2-1.7-3.4-2-5l-0.6-2.7h43.5c-1-12.8-2.1-17.4-3.7-21-1.4-3-3.8-7-5.4-8.8-1.6-1.9-5.1-4.5-7.9-5.8-2.7-1.2-7.7-2.5-11-2.8-3.3-0.3-7.8-0.1-10 0.3zm1.9 16.6c1.7-0.8 3.7-1.4 4.4-1.5 0.6 0 2.7 0.6 4.5 1.4 1.7 0.7 4 2.2 4.9 3.2 0.9 1.1 1.9 3.1 2.8 7.4h-12c-8.9 0-12-0.3-12-1.3 0-0.6 1-2.7 2.2-4.5 1.2-1.8 3.6-3.9 5.2-4.7zm-357.4 16.5v33h19c0-38.7 0.2-40.8 2-43.8 1.1-1.7 3.2-3.7 4.7-4.3 1.6-0.6 4.6-0.8 6.8-0.5 2.8 0.3 4.8 1.4 6.7 3.5l2.8 3.1v42h19c0-32.5 0.4-38.9 1.3-41.3 0.8-1.7 2.7-4.2 4.3-5.5 1.7-1.3 4.2-2.3 6.1-2.2 1.8 0 4.6 0.7 6.3 1.5 1.7 0.8 3.7 3 4.5 5 1.2 2.7 1.5 7.9 1.5 23v19.5h19c-0.6-39.8-1.1-47.6-2.1-50.4-0.8-2.1-3-5.7-4.9-7.9-1.9-2.2-5.3-4.9-7.5-5.9-2.5-1.1-6.4-1.8-10.5-1.8q-6.5 0-10.5 1.9c-2.2 1.1-5.5 3.6-7.3 5.5l-3.2 3.6c-6.6-6.7-10.3-9.2-12.5-9.9-2.3-0.8-6.8-1.2-10.7-1-5.5 0.3-7.4 0.9-11.2 3.6l-4.6 3.3v-7h-19zm233 0v33h19v-66h-19zm27.4-31.3c0.3 1 5.2 15.7 10.9 32.8l10.4 31h23.6c16.1-48.1 20.9-62.8 21.2-63.8 0.5-1.5-0.5-1.7-9.5-1.7h-10c-1.4 5-4.2 14.8-7.1 25-2.8 10.2-5.4 19.1-5.8 19.8-0.3 0.7-3.5-9-7.1-21.5l-6.5-22.8c-19.8-0.5-20.6-0.4-20.1 1.2zm-327.4 116.8v27.5h34l-0.5-8.5h-25v-15l21.5-0.5v-8h-22v-14h25v-9h-33zm64 0v27.5h8l0.5-36.5c24.2 36.1 24.6 36.5 28 36.5h3.5v-55h-8.1l-0.4 37.3c-24.5-36.6-25.1-37.4-28.3-37.3h-3.2zm83.5-26c-1.7 0.9-4.7 3.3-6.8 5.3-2.1 2.1-4.6 6.1-5.8 9.2-1.7 4.4-2 7.1-1.7 13.5 0.4 6.1 1.1 9.2 3.1 13.2 1.7 3.3 4.3 6.5 6.9 8.3 2.4 1.7 6.1 3.6 8.3 4.1 2.2 0.6 6 0.7 8.5 0.3 2.5-0.3 5.8-1.3 7.5-2.2 1.7-0.8 3.8-2.2 4.8-3.1 1.5-1.3 1.8-3.3 1.7-12.4v-10.7h-7l-0.5 17.5c-6.7 2.3-9.3 2.5-12 2-2.6-0.5-5.3-2-7.6-4.4-2.2-2.2-4.1-5.4-4.9-8.1-0.7-2.5-1-6.3-0.8-8.5 0.2-2.2 1.3-5.8 2.5-8 1.1-2.2 3.5-5 5.4-6.3 2.4-1.6 4.8-2.2 8.4-2.2 3.6 0 6 0.7 9 2.6l4 2.7c3.7-5 4.1-6.2 3.3-7.3-0.5-0.8-2.6-2.6-4.5-4-3-2-5.1-2.6-11.2-2.8-5.5-0.2-8.4 0.1-10.6 1.3zm58.5 26v27.5h8v-55h-8zm41 0v27.5h8l0.5-36.5c24.2 36.1 24.6 36.5 28 36.5h3.5v-55h-8.1l-0.4 37.3c-24.5-36.6-25.1-37.4-28.3-37.3h-3.2zm73 0v27.5h34l-0.5-8.5h-25v-15l21.5-0.5v-8h-22v-14h25v-9h-33z"/>
                    <path fill="url(#logoGradient)" d="m819.8 65h7v-24.4h9.6v-5.7h-26.2v5.7h9.6zm54.7 0l-0.1-30.1h-5.7l-11.1 18.7-11.3-18.7h-5.7v30.1h6.5v-17.7l8.8 14.5h3.2l8.8-14.9 0.1 18.1z"/>
                    <!-- Icon paths with animated gradient -->
                    <path fill="url(#logoGradient)" fill-rule="evenodd" d="m64.2 251.9c-15.1 0-27.3 12.3-27.3 27.4 0 15.1 12.2 27.3 27.3 27.3 15.1 0 27.4-12.2 27.4-27.3 0-15.1-12.3-27.4-27.4-27.4zm0 45.3c-9.9 0-17.9-8-17.9-17.9 0-9.9 8-18 17.9-18 9.9 0 18 8.1 18 18 0 9.9-8.1 17.9-18 17.9z"/>
                    <path fill="url(#logoGradient)" d="m38.1 225.3c-6.3-0.1-11.4-5.1-11.4-11.4 0-6.3 5.1-11.4 11.4-11.4 6.3 0 11.3 5.1 11.3 11.4 0 6.3-5 11.3-11.3 11.3z"/>
                    <path fill="url(#logoGradient)" fill-rule="evenodd" d="m310.7 9.4c-10.8 0-19.6 8.7-19.6 19.6 0 10.8 8.8 19.5 19.6 19.5 10.8 0 19.6-8.7 19.6-19.5 0-10.9-8.8-19.6-19.6-19.6zm0 27.9c-4.9 0-8.9-4-8.9-8.9 0-5 4-8.9 8.9-8.9 4.9 0 8.9 3.9 8.9 8.9 0 4.9-4 8.9-8.9 8.9z"/>
                    <path fill="url(#logoGradient)" fill-rule="evenodd" d="m194.5 79.2c-40.8 0-73.8 33.1-73.8 73.9 0 40.8 33 73.8 73.8 73.8 40.8 0 73.9-33 73.9-73.8 0-40.8-33.1-73.9-73.9-73.9zm26.8 91.1c-13 0-23.6-10.6-23.6-23.7 0-13.1 10.6-23.7 23.6-23.7 13.1 0 23.7 10.6 23.7 23.7 0 13.1-10.6 23.7-23.7 23.7z"/>
                    <path fill="url(#logoGradient)" fill-rule="evenodd" d="m194.5 14.3c-76.6 0-138.7 62.2-138.7 138.8 0 76.6 62.1 138.7 138.7 138.7 76.7 0 138.8-62.1 138.8-138.7 0-76.6-62.1-138.8-138.8-138.8zm0 229.7c-50.2 0-90.8-40.7-90.8-90.9 0-50.2 40.6-90.9 90.8-90.9 50.2 0 90.9 40.7 90.9 90.9 0 50.2-40.7 90.9-90.9 90.9z"/>
                  </svg>
                </div>
                <p class="hero-tagline">
                  Build expressive AI mascots with 2D canvas and 3D WebGL rendering
                </p>
                <div class="hero-badges">
                  <span class="badge webgl">WebGL 3D</span>
                  <span class="badge canvas">Canvas 2D</span>
                  <span class="badge ai">LLM Ready</span>
                </div>
              </header>

              <!-- 3D Examples -->
              <section class="section">
                <div class="section-header">
                  <div class="section-icon webgl">&#x1F48E;</div>
                  <h2>3D WebGL Examples</h2>
                  <span class="section-count">5 demos</span>
                </div>

                <div class="bento-grid">
                  <!-- Featured: 3D Demo -->
                  <a href="examples/3d/3d-demo.html" class="card featured">
                    <div class="card-preview">
                      <img src="assets/previews/3d-demo.gif" alt="3D Demo" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F310;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>3D Interactive Showcase</h3>
                      <p>The complete 3D experience. Switch between crystal, moon, and sun geometries with emotions and effects.</p>
                      <div class="card-tags">
                        <span class="tag">all geometries</span>
                        <span class="tag">emotions</span>
                        <span class="tag">bloom</span>
                      </div>
                    </div>
                  </a>

                  <!-- Crystal -->
                  <a href="examples/3d/crystal-demo.html" class="card medium">
                    <div class="card-preview">
                      <img src="assets/previews/crystal.gif" alt="Crystal Soul" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F48E;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Crystal Soul</h3>
                      <p>Frosted crystal with dynamic inner soul glow and SSS presets.</p>
                      <div class="card-tags">
                        <span class="tag">SSS</span>
                        <span class="tag">blend modes</span>
                      </div>
                    </div>
                  </a>

                  <!-- Moon -->
                  <a href="examples/3d/moon-demo.html" class="card medium">
                    <div class="card-preview">
                      <img src="assets/previews/moon.gif" alt="Moon Phases" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F319;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Moon Phases</h3>
                      <p>Realistic moon with 8 phases and tidal lock camera.</p>
                      <div class="card-tags">
                        <span class="tag">phases</span>
                        <span class="tag">textures</span>
                      </div>
                    </div>
                  </a>

                  <!-- Sun -->
                  <a href="examples/3d/sun-demo.html" class="card small">
                    <div class="card-preview">
                      <img src="assets/previews/sun.gif" alt="Solar Eclipse" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x2600;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Solar Eclipse</h3>
                      <p>Corona effects and blend layers.</p>
                      <div class="card-tags">
                        <span class="tag">corona</span>
                        <span class="tag">eclipse</span>
                      </div>
                    </div>
                  </a>

                  <!-- Blood Moon -->
                  <a href="examples/3d/blood-moon-demo.html" class="card small">
                    <div class="card-preview">
                      <img src="assets/previews/blood-moon.gif" alt="Blood Moon" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F311;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span>
                        </span>
                      </div>
                      <h3>Blood Moon Eclipse</h3>
                      <p>Rayleigh scattering simulation.</p>
                      <div class="card-tags">
                        <span class="tag">physics</span>
                        <span class="tag">eclipse</span>
                      </div>
                    </div>
                  </a>
                </div>
              </section>

              <!-- 2D Examples -->
              <section class="section">
                <div class="section-header">
                  <div class="section-icon canvas">&#x1F3A8;</div>
                  <h2>2D Canvas Examples</h2>
                  <span class="section-count">5 demos</span>
                </div>

                <div class="bento-grid">
                  <!-- Hello World -->
                  <a href="examples/2d/2d-hello-world.html" class="card medium">
                    <div class="card-preview">
                      <img src="assets/previews/hello-world.gif" alt="Hello World" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F44B;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Hello World</h3>
                      <p>The simplest example. Start here to learn the basics.</p>
                      <div class="card-tags">
                        <span class="tag">beginner</span>
                        <span class="tag">minimal</span>
                      </div>
                    </div>
                  </a>

                  <!-- Basic Usage -->
                  <a href="examples/2d/basic-usage.html" class="card medium">
                    <div class="card-preview">
                      <img src="assets/previews/basic-usage.gif" alt="Basic Usage" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F3AE;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Basic Usage</h3>
                      <p>Emotions, gestures, and shapes with keyboard shortcuts.</p>
                      <div class="card-tags">
                        <span class="tag">emotions</span>
                        <span class="tag">gestures</span>
                        <span class="tag">shapes</span>
                      </div>
                    </div>
                  </a>

                  <!-- Breathing App -->
                  <a href="examples/2d/breathing-app.html" class="card small">
                    <div class="card-preview">
                      <img src="assets/previews/breathing.gif" alt="Breathing App" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F32C;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Breathing App</h3>
                      <p>Guided breathing exercises.</p>
                      <div class="card-tags">
                        <span class="tag">wellness</span>
                        <span class="tag">animation</span>
                      </div>
                    </div>
                  </a>

                  <!-- Event Handling -->
                  <a href="examples/2d/event-handling.html" class="card small">
                    <div class="card-preview">
                      <img src="assets/previews/events.gif" alt="Event Handling" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F4E1;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Event Handling</h3>
                      <p>Monitor events in real-time.</p>
                      <div class="card-tags">
                        <span class="tag">events</span>
                        <span class="tag">debugging</span>
                      </div>
                    </div>
                  </a>

                  <!-- Rhythm Sync -->
                  <a href="examples/2d/rhythm-sync-demo.html" class="card small">
                    <div class="card-preview">
                      <img src="assets/previews/rhythm.gif" alt="Rhythm Sync" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F3B5;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Rhythm Sync</h3>
                      <p>Beat-synchronized animations.</p>
                      <div class="card-tags">
                        <span class="tag">audio</span>
                        <span class="tag">tempo</span>
                      </div>
                    </div>
                  </a>
                </div>
              </section>

              <!-- LLM Integration -->
              <section class="section">
                <div class="section-header">
                  <div class="section-icon ai">&#x1F916;</div>
                  <h2>LLM Integration</h2>
                  <span class="section-count">1 demo</span>
                </div>

                <div class="bento-grid">
                  <a href="examples/llm-integration/claude-haiku.html" class="card medium">
                    <div class="card-preview">
                      <img src="assets/previews/claude-chat.gif" alt="Claude Chat" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                      <div class="preview-placeholder" style="display:none"><span class="icon">&#x1F4AC;</span></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category ai">AI</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Claude Chat</h3>
                      <p>Emotional AI assistant responding with emotions based on conversation sentiment.</p>
                      <div class="card-tags">
                        <span class="tag">Claude</span>
                        <span class="tag">sentiment</span>
                        <span class="tag">chat</span>
                      </div>
                    </div>
                  </a>
                </div>
              </section>

              <!-- Footer -->
              <footer class="footer">
                <div class="footer-links">
                  <a href="https://github.com/joshtol/emotive-engine">GitHub</a>
                  <a href="https://github.com/joshtol/emotive-engine#readme">Documentation</a>
                  <a href="https://www.npmjs.com/package/@joshtol/emotive-engine">npm</a>
                </div>
                <p class="footer-copy">Emotive Engine - Emotional AI Mascot Library</p>
              </footer>
            </div>

            <script>
              // Card mouse tracking for glow effect
              document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('mousemove', (e) => {
                  const rect = card.getBoundingClientRect();
                  const x = ((e.clientX - rect.left) / rect.width) * 100;
                  const y = ((e.clientY - rect.top) / rect.height) * 100;
                  card.style.setProperty('--mouse-x', x + '%');
                  card.style.setProperty('--mouse-y', y + '%');
                });
              });
            </script>
          </body>
          </html>
          INDEXEOF

      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: '_pages'

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
