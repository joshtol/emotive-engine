# Deploy examples to GitHub Pages
# Triggered on push to main branch

name: Deploy Examples to GitHub Pages

on:
  push:
    branches: [main]
  workflow_dispatch: # Allow manual trigger

# Sets permissions for GITHUB_TOKEN to deploy to Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment
concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Build
        run: npm run build

      - name: Prepare Pages directory
        run: |
          mkdir -p _pages

          # Copy dist files
          cp -r dist _pages/dist

          # Copy examples
          cp -r examples _pages/examples

          # Copy assets needed by examples
          cp -r assets _pages/assets 2>/dev/null || true

          # Copy HDRI files for environment mapping
          cp -r public/hdri _pages/hdri 2>/dev/null || true

          # 2D examples reference site/public/emotive-engine.js - create that path
          # Must use UMD build for regular <script> tag loading (not ES module)
          mkdir -p _pages/site/public
          cp dist/emotive-mascot.umd.js _pages/site/public/emotive-engine.js

          # Create index.html that lists all examples
          cat > _pages/index.html << 'INDEXEOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Emotive Engine - Interactive Demo Gallery</title>
            <meta name="description" content="Emotional AI mascot engine with 2D canvas and 3D WebGL support. Interactive demos showcasing emotions, gestures, and visual effects.">
            <link rel="stylesheet" href="examples/example-styles.css">
            <style>
              :root {
                --pink: #DD4A9A;
                --blue: #4090CE;
                --teal: #84CFC5;
                --bg-dark: #0a0a0a;
                --bg-card: rgba(30, 30, 35, 0.8);
                --text: #F2F1F1;
                --text-muted: #888;
              }

              * { margin: 0; padding: 0; box-sizing: border-box; }

              body {
                font-family: system-ui, -apple-system, sans-serif;
                background: var(--bg-dark);
                color: var(--text);
                min-height: 100vh;
                overflow-x: hidden;
              }

              /* ============================================
                 MASCOT CONTAINER - Matches MascotRenderer.tsx
                 ============================================ */

              /* 2D mode: fullscreen fixed container */
              #mascot-container-2d {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                pointer-events: none;
                z-index: 100;
                opacity: 1;
                transition: opacity 0.5s ease-out;
              }

              #mascot-container-2d canvas {
                width: 100%;
                height: 100%;
                filter: drop-shadow(0 10px 40px rgba(102, 126, 234, 0.4));
                background: transparent !important;
                border: none !important;
              }

              /* 3D mode: sized container positioned like home page */
              #mascot-container-3d {
                position: fixed;
                top: 50%;
                left: calc(max(20px, (50vw - 500px) / 2 - 375px));
                transform: translateY(-50%);
                width: 750px;
                height: 1050px;
                pointer-events: none;
                z-index: 100;
              }

              /* Mobile 3D positioning */
              @media (max-width: 768px) {
                #mascot-container-3d {
                  top: 18%;
                  left: 50%;
                  transform: translate(-50%, -50%);
                  width: 440px;
                  height: 605px;
                }
              }

              /* Mode toggle button - matches MascotRenderer.tsx */
              #mode-toggle {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1000;
                padding: 8px 16px;
                border-radius: 20px;
                border: 1px solid rgba(255,255,255,0.2);
                background: rgba(0,0,0,0.6);
                color: #fff;
                font-size: 12px;
                cursor: pointer;
                backdrop-filter: blur(10px);
                transition: all 0.2s ease;
              }

              #mode-toggle:hover {
                background: rgba(102,126,234,0.6);
              }

              /* Loading indicator */
              #mascot-loading {
                position: fixed;
                top: 50%;
                left: calc(max(20px, (50vw - 500px) / 2 - 100px));
                transform: translate(-50%, -50%);
                color: #667eea;
                font-size: 14px;
                opacity: 0.6;
                z-index: 101;
              }

              @media (max-width: 768px) {
                #mascot-loading {
                  top: 30%;
                  left: 50%;
                }
              }

              /* Fallback logo if both fail */
              .hero-logo-fallback {
                position: fixed;
                top: 50%;
                left: calc(max(20px, (50vw - 500px) / 2 - 60px));
                transform: translateY(-50%);
                width: 120px;
                height: 120px;
                display: none;
                filter: drop-shadow(0 0 40px rgba(132, 207, 197, 0.5));
                z-index: 100;
              }

              .hero-logo-fallback.visible {
                display: block;
              }

              @media (max-width: 768px) {
                .hero-logo-fallback {
                  top: 25%;
                  left: 50%;
                  transform: translate(-50%, -50%);
                }
              }

              /* ============================================
                 PAGE CONTENT
                 ============================================ */

              .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 40px 24px;
                position: relative;
                z-index: 1;
              }

              /* Hero Section */
              .hero {
                text-align: center;
                padding: clamp(8rem, 20vh, 12rem) 20px 60px;
                position: relative;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
              }

              .hero h1 {
                font-size: clamp(2.5rem, 7vw, 4rem);
                font-weight: 900;
                background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 30%, #a5b4fc 60%, #667eea 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 16px;
                letter-spacing: -0.04em;
                line-height: 1.05;
              }

              .hero-tagline {
                font-size: clamp(1rem, 2.5vw, 1.25rem);
                color: rgba(255, 255, 255, 0.7);
                max-width: 600px;
                margin: 0 auto 32px;
                line-height: 1.6;
              }

              .hero-badges {
                display: flex;
                gap: 12px;
                justify-content: center;
                flex-wrap: wrap;
              }

              .badge {
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
                border: 1px solid;
              }

              .badge.webgl { background: rgba(221, 74, 154, 0.15); border-color: rgba(221, 74, 154, 0.4); color: var(--pink); }
              .badge.canvas { background: rgba(64, 144, 206, 0.15); border-color: rgba(64, 144, 206, 0.4); color: var(--blue); }
              .badge.ai { background: rgba(132, 207, 197, 0.15); border-color: rgba(132, 207, 197, 0.4); color: var(--teal); }

              /* Section Headers */
              .section {
                margin-bottom: 60px;
              }

              .section-header {
                display: flex;
                align-items: center;
                gap: 16px;
                margin-bottom: 24px;
              }

              .section-icon {
                width: 40px;
                height: 40px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
              }

              .section-icon.webgl { background: linear-gradient(135deg, var(--pink), var(--blue)); }
              .section-icon.canvas { background: linear-gradient(135deg, var(--blue), var(--teal)); }
              .section-icon.ai { background: linear-gradient(135deg, var(--teal), var(--pink)); }

              .section h2 {
                font-size: 1.5rem;
                font-weight: 600;
                color: var(--text);
              }

              .section-count {
                color: var(--text-muted);
                font-size: 0.9rem;
                margin-left: auto;
              }

              /* Bento Grid */
              .bento-grid {
                display: grid;
                grid-template-columns: repeat(12, 1fr);
                gap: 16px;
              }

              /* Card Styles */
              .card {
                position: relative;
                background: var(--bg-card);
                border: 1px solid rgba(255, 255, 255, 0.06);
                border-radius: 16px;
                overflow: hidden;
                text-decoration: none;
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                display: flex;
                flex-direction: column;
              }

              .card:hover {
                transform: translateY(-4px) scale(1.02);
                border-color: rgba(221, 74, 154, 0.4);
                box-shadow:
                  0 20px 40px rgba(0, 0, 0, 0.4),
                  0 0 60px rgba(221, 74, 154, 0.15);
              }

              /* Card sizes for bento */
              .card.featured { grid-column: span 8; }
              .card.medium { grid-column: span 4; }
              .card.small { grid-column: span 4; }

              /* Preview area with placeholder */
              .card-preview {
                position: relative;
                height: 180px;
                background: linear-gradient(135deg, rgba(30,30,35,1) 0%, rgba(20,20,25,1) 100%);
                overflow: hidden;
              }

              .card.featured .card-preview { height: 280px; }

              .card-preview img, .card-preview video {
                width: 100%;
                height: 100%;
                object-fit: cover;
                opacity: 0.9;
                transition: all 0.4s ease;
              }

              .card:hover .card-preview img,
              .card:hover .card-preview video {
                opacity: 1;
                transform: scale(1.05);
              }

              /* Placeholder for missing images */
              .preview-placeholder {
                position: absolute;
                inset: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, rgba(221, 74, 154, 0.1) 0%, rgba(64, 144, 206, 0.1) 100%);
                color: var(--text-muted);
                font-size: 0.8rem;
                text-align: center;
                padding: 20px;
              }

              .preview-placeholder .icon {
                font-size: 3rem;
                margin-bottom: 12px;
                opacity: 0.5;
              }

              /* Glow effect on hover */
              .card::before {
                content: '';
                position: absolute;
                inset: 0;
                background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                  rgba(221, 74, 154, 0.15) 0%, transparent 50%);
                opacity: 0;
                transition: opacity 0.3s;
                pointer-events: none;
                z-index: 1;
              }

              .card:hover::before { opacity: 1; }

              /* Card content */
              .card-content {
                padding: 20px;
                flex: 1;
                display: flex;
                flex-direction: column;
              }

              .card-meta {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 12px;
              }

              .card-category {
                font-size: 0.7rem;
                text-transform: uppercase;
                letter-spacing: 1px;
                padding: 4px 10px;
                border-radius: 4px;
                font-weight: 600;
              }

              .card-category.webgl { background: rgba(221, 74, 154, 0.2); color: var(--pink); }
              .card-category.canvas { background: rgba(64, 144, 206, 0.2); color: var(--blue); }
              .card-category.ai { background: rgba(132, 207, 197, 0.2); color: var(--teal); }

              .complexity {
                font-size: 0.75rem;
                color: var(--text-muted);
                margin-left: auto;
              }

              .complexity .star { color: #FFD700; }
              .complexity .star.empty { opacity: 0.3; }

              .card h3 {
                font-size: 1.2rem;
                font-weight: 600;
                color: var(--text);
                margin-bottom: 8px;
              }

              .card.featured h3 { font-size: 1.5rem; }

              .card p {
                font-size: 0.9rem;
                color: var(--text-muted);
                line-height: 1.5;
                flex: 1;
              }

              .card-tags {
                display: flex;
                gap: 6px;
                flex-wrap: wrap;
                margin-top: 16px;
              }

              .tag {
                font-size: 0.7rem;
                padding: 4px 8px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 4px;
                color: var(--text-muted);
              }

              /* Play indicator */
              .play-indicator {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 60px;
                height: 60px;
                background: rgba(221, 74, 154, 0.9);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transition: all 0.3s ease;
                z-index: 2;
              }

              .play-indicator::after {
                content: '';
                border-style: solid;
                border-width: 10px 0 10px 16px;
                border-color: transparent transparent transparent white;
                margin-left: 4px;
              }

              .card:hover .play-indicator {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
              }

              /* Footer */
              .footer {
                text-align: center;
                padding: 40px 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.06);
                margin-top: 40px;
              }

              .footer-links {
                display: flex;
                gap: 24px;
                justify-content: center;
                margin-bottom: 16px;
              }

              .footer-links a {
                color: var(--text-muted);
                text-decoration: none;
                font-size: 0.9rem;
                transition: color 0.2s;
              }

              .footer-links a:hover { color: var(--pink); }

              .footer-copy {
                color: var(--text-muted);
                font-size: 0.8rem;
              }

              /* Responsive */
              @media (max-width: 900px) {
                .card.featured, .card.medium, .card.small { grid-column: span 6; }
                .hero h1 { font-size: 2.5rem; }
              }

              @media (max-width: 600px) {
                .card.featured, .card.medium, .card.small { grid-column: span 12; }
                .hero h1 { font-size: 2rem; }
                .hero-tagline { font-size: 1rem; }
                .bento-grid { gap: 12px; }
                .card-preview { height: 160px; }
                .card.featured .card-preview { height: 200px; }
              }
            </style>
          </head>
          <body>
            <!-- Mascot containers - outside page content flow -->
            <div id="mascot-container-2d" style="display: none;">
              <canvas id="mascot-2d-canvas"></canvas>
            </div>
            <div id="mascot-container-3d"></div>
            <div id="mascot-loading">Loading mascot...</div>
            <img src="assets/emotive-engine-icon-W.svg" alt="Emotive Engine" class="hero-logo-fallback" id="hero-fallback">
            <button id="mode-toggle" style="display: none;">Switch to 2D</button>

            <div class="container">
              <!-- Hero -->
              <header class="hero">
                <h1>Emotive Engine</h1>
                <p class="hero-tagline">
                  A powerful emotional AI mascot engine with 2D canvas and 3D WebGL rendering.
                  Build expressive, interactive characters that respond to user emotions.
                </p>
                <div class="hero-badges">
                  <span class="badge webgl">WebGL 3D</span>
                  <span class="badge canvas">Canvas 2D</span>
                  <span class="badge ai">LLM Ready</span>
                </div>
              </header>

              <!-- 3D Examples -->
              <section class="section">
                <div class="section-header">
                  <div class="section-icon webgl">&#x1F48E;</div>
                  <h2>3D WebGL Examples</h2>
                  <span class="section-count">5 demos</span>
                </div>

                <div class="bento-grid">
                  <!-- Featured: 3D Demo -->
                  <a href="examples/3d/3d-demo.html" class="card featured">
                    <div class="card-preview">
                      <!-- TODO: Add animated GIF showing geometry morphing between crystal/moon/sun with emotion changes -->
                      <!-- File: assets/previews/3d-demo.gif (800x400px, show all 3 geometries morphing) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F310;</span>
                        <span>Preview: Animated GIF showing crystal morphing to moon to sun with particle effects and emotion transitions</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>3D Interactive Showcase</h3>
                      <p>The complete 3D experience. Switch between crystal, moon, and sun geometries. Explore all emotions, gestures, and visual effects including bloom, particles, and subsurface scattering.</p>
                      <div class="card-tags">
                        <span class="tag">all geometries</span>
                        <span class="tag">emotions</span>
                        <span class="tag">particles</span>
                        <span class="tag">bloom</span>
                      </div>
                    </div>
                  </a>

                  <!-- Crystal -->
                  <a href="examples/3d/crystal-demo.html" class="card medium">
                    <div class="card-preview">
                      <!-- TODO: Add screenshot/GIF of crystal with soul glow pulsing -->
                      <!-- File: assets/previews/crystal.gif (400x300px, subtle soul pulse animation) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F48E;</span>
                        <span>Preview: Crystal with inner soul glow pulsing</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Crystal Soul</h3>
                      <p>Frosted crystal with dynamic inner soul glow and SSS presets.</p>
                      <div class="card-tags">
                        <span class="tag">SSS</span>
                        <span class="tag">blend modes</span>
                      </div>
                    </div>
                  </a>

                  <!-- Moon -->
                  <a href="examples/3d/moon-demo.html" class="card medium">
                    <div class="card-preview">
                      <!-- TODO: Add GIF of moon cycling through phases -->
                      <!-- File: assets/previews/moon.gif (400x300px, phase cycle animation) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F319;</span>
                        <span>Preview: Moon cycling through all 8 phases</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Moon Phases</h3>
                      <p>Realistic moon with 8 phases and tidal lock camera.</p>
                      <div class="card-tags">
                        <span class="tag">phases</span>
                        <span class="tag">textures</span>
                      </div>
                    </div>
                  </a>

                  <!-- Sun -->
                  <a href="examples/3d/sun-demo.html" class="card small">
                    <div class="card-preview">
                      <!-- TODO: Add GIF of solar eclipse with corona rays -->
                      <!-- File: assets/previews/sun.gif (400x300px, eclipse animation with corona) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x2600;</span>
                        <span>Preview: Solar eclipse with corona rays</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Solar Eclipse</h3>
                      <p>Corona effects and blend layers.</p>
                      <div class="card-tags">
                        <span class="tag">corona</span>
                        <span class="tag">eclipse</span>
                      </div>
                    </div>
                  </a>

                  <!-- Blood Moon -->
                  <a href="examples/3d/blood-moon-demo.html" class="card small">
                    <div class="card-preview">
                      <!-- TODO: Add GIF of lunar eclipse with red shadow sweep -->
                      <!-- File: assets/previews/blood-moon.gif (400x300px, eclipse shadow animation) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F311;</span>
                        <span>Preview: Lunar eclipse with blood red Rayleigh scattering</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category webgl">WebGL</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span>
                        </span>
                      </div>
                      <h3>Blood Moon Eclipse</h3>
                      <p>Rayleigh scattering simulation.</p>
                      <div class="card-tags">
                        <span class="tag">physics</span>
                        <span class="tag">eclipse</span>
                      </div>
                    </div>
                  </a>
                </div>
              </section>

              <!-- 2D Examples -->
              <section class="section">
                <div class="section-header">
                  <div class="section-icon canvas">&#x1F3A8;</div>
                  <h2>2D Canvas Examples</h2>
                  <span class="section-count">5 demos</span>
                </div>

                <div class="bento-grid">
                  <!-- Hello World - Featured for beginners -->
                  <a href="examples/2d/2d-hello-world.html" class="card medium">
                    <div class="card-preview">
                      <!-- TODO: Add simple GIF of mascot breathing/pulsing -->
                      <!-- File: assets/previews/hello-world.gif (400x300px, simple breathing animation) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F44B;</span>
                        <span>Preview: Simple mascot with gentle breathing animation</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Hello World</h3>
                      <p>The simplest example. Start here to learn the basics.</p>
                      <div class="card-tags">
                        <span class="tag">beginner</span>
                        <span class="tag">minimal</span>
                      </div>
                    </div>
                  </a>

                  <!-- Basic Usage -->
                  <a href="examples/2d/basic-usage.html" class="card medium">
                    <div class="card-preview">
                      <!-- TODO: Add GIF showing emotion changes and shape morphing -->
                      <!-- File: assets/previews/basic-usage.gif (400x300px, emotion + shape demo) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F3AE;</span>
                        <span>Preview: Mascot changing emotions and morphing shapes</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Basic Usage</h3>
                      <p>Emotions, gestures, and shapes with keyboard shortcuts.</p>
                      <div class="card-tags">
                        <span class="tag">emotions</span>
                        <span class="tag">gestures</span>
                        <span class="tag">shapes</span>
                      </div>
                    </div>
                  </a>

                  <!-- Breathing App -->
                  <a href="examples/2d/breathing-app.html" class="card small">
                    <div class="card-preview">
                      <!-- TODO: Add GIF of breathing exercise visualization -->
                      <!-- File: assets/previews/breathing.gif (400x300px, inhale/exhale animation) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F32C;</span>
                        <span>Preview: Guided breathing with expand/contract animation</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Breathing App</h3>
                      <p>Guided breathing exercises.</p>
                      <div class="card-tags">
                        <span class="tag">wellness</span>
                        <span class="tag">animation</span>
                      </div>
                    </div>
                  </a>

                  <!-- Event Handling -->
                  <a href="examples/2d/event-handling.html" class="card small">
                    <div class="card-preview">
                      <!-- TODO: Add screenshot of event log UI -->
                      <!-- File: assets/previews/events.png (400x300px, event log interface) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F4E1;</span>
                        <span>Preview: Real-time event log monitoring UI</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Event Handling</h3>
                      <p>Monitor events in real-time.</p>
                      <div class="card-tags">
                        <span class="tag">events</span>
                        <span class="tag">debugging</span>
                      </div>
                    </div>
                  </a>

                  <!-- Rhythm Sync -->
                  <a href="examples/2d/rhythm-sync-demo.html" class="card small">
                    <div class="card-preview">
                      <!-- TODO: Add GIF of beat-synced animation -->
                      <!-- File: assets/previews/rhythm.gif (400x300px, pulsing to beat) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F3B5;</span>
                        <span>Preview: Mascot pulsing in sync with beat</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category canvas">Canvas</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Rhythm Sync</h3>
                      <p>Beat-synchronized animations.</p>
                      <div class="card-tags">
                        <span class="tag">audio</span>
                        <span class="tag">tempo</span>
                      </div>
                    </div>
                  </a>
                </div>
              </section>

              <!-- LLM Integration -->
              <section class="section">
                <div class="section-header">
                  <div class="section-icon ai">&#x1F916;</div>
                  <h2>LLM Integration</h2>
                  <span class="section-count">1 demo</span>
                </div>

                <div class="bento-grid">
                  <a href="examples/llm-integration/claude-haiku.html" class="card medium">
                    <div class="card-preview">
                      <!-- TODO: Add GIF of chat interaction with emotion changes -->
                      <!-- File: assets/previews/claude-chat.gif (400x300px, typing message, mascot reacts) -->
                      <div class="preview-placeholder">
                        <span class="icon">&#x1F4AC;</span>
                        <span>Preview: Chat interaction with mascot responding emotionally to messages</span>
                      </div>
                      <div class="play-indicator"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-meta">
                        <span class="card-category ai">AI</span>
                        <span class="complexity">
                          <span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star">&#9733;</span><span class="star empty">&#9733;</span><span class="star empty">&#9733;</span>
                        </span>
                      </div>
                      <h3>Claude Chat</h3>
                      <p>Emotional AI assistant that responds with appropriate emotions, shapes, and gestures based on conversation sentiment.</p>
                      <div class="card-tags">
                        <span class="tag">Claude</span>
                        <span class="tag">sentiment</span>
                        <span class="tag">chat</span>
                      </div>
                    </div>
                  </a>
                </div>
              </section>

              <!-- Footer -->
              <footer class="footer">
                <div class="footer-links">
                  <a href="https://github.com/joshtol/emotive-engine">GitHub</a>
                  <a href="https://github.com/joshtol/emotive-engine#readme">Documentation</a>
                  <a href="https://www.npmjs.com/package/emotive-engine">npm</a>
                </div>
                <p class="footer-copy">Emotive Engine - Emotional AI Mascot Library</p>
              </footer>
            </div>

            <!-- Mascot Renderer - matches MascotRenderer.tsx exactly -->
            <script type="module">
              // State
              const STORAGE_KEY = 'emotive-mascot-mode';
              let currentMode = null; // '3d' or '2d'
              let mascot = null;
              let hasWebGL = false;

              // DOM elements
              const container2D = document.getElementById('mascot-container-2d');
              const container3D = document.getElementById('mascot-container-3d');
              const canvas2D = document.getElementById('mascot-2d-canvas');
              const loading = document.getElementById('mascot-loading');
              const fallback = document.getElementById('hero-fallback');
              const modeToggle = document.getElementById('mode-toggle');

              // Check WebGL support
              function checkWebGLSupport() {
                try {
                  const canvas = document.createElement('canvas');
                  return !!(canvas.getContext('webgl2') || canvas.getContext('webgl'));
                } catch {
                  return false;
                }
              }

              // Get stored mode preference
              function getStoredMode() {
                try {
                  const stored = localStorage.getItem(STORAGE_KEY);
                  if (stored === '3d' || stored === '2d') return stored;
                } catch {}
                return null;
              }

              // Store mode preference
              function storeMode(mode) {
                try { localStorage.setItem(STORAGE_KEY, mode); } catch {}
              }

              // Destroy current mascot
              function destroyMascot() {
                if (mascot) {
                  try {
                    mascot.stop?.();
                    mascot.destroy?.();
                  } catch {}
                  mascot = null;
                }
              }

              // Wait for global variable
              function waitForGlobal(name, timeout = 10000) {
                return new Promise((resolve, reject) => {
                  const start = Date.now();
                  const check = () => {
                    const global = window[name];
                    if (global) resolve(global);
                    else if (Date.now() - start > timeout) reject(new Error('Timeout waiting for ' + name));
                    else setTimeout(check, 50);
                  };
                  check();
                });
              }

              // Load 3D mascot - matches MascotRenderer.tsx load3DMascot
              async function load3DMascot() {
                container2D.style.display = 'none';
                container3D.style.display = 'block';

                if (!document.querySelector('script[src*="emotive-mascot-3d"]')) {
                  const script = document.createElement('script');
                  script.src = './dist/emotive-mascot-3d.umd.js?v=' + Date.now();
                  script.async = true;
                  document.head.appendChild(script);
                }

                const EmotiveMascot3DModule = await waitForGlobal('EmotiveMascot3D');
                const EmotiveMascot3D = EmotiveMascot3DModule?.default || EmotiveMascot3DModule;

                if (!EmotiveMascot3D || typeof EmotiveMascot3D !== 'function') {
                  throw new Error('EmotiveMascot3D class not found');
                }

                const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent);
                const cpuCores = navigator.hardwareConcurrency || 4;
                const isLowEnd = cpuCores <= 4 || isMobile;

                mascot = new EmotiveMascot3D({
                  coreGeometry: 'crystal',
                  enableParticles: true,
                  enablePostProcessing: true,
                  enableControls: false,
                  autoRotate: true,
                  autoRotateSpeed: 0.3,
                  defaultEmotion: 'neutral',
                  maxParticles: isLowEnd ? 100 : 200,
                  targetFPS: isLowEnd ? 30 : 60,
                  cameraDistance: 2.5,
                  fov: 35,
                  minZoom: 1.5,
                  maxZoom: 4.0,
                  enableBlinking: true,
                  enableBreathing: true,
                  enableShadows: false,
                  assetBasePath: './assets'
                });

                mascot.init(container3D);
                mascot.start();
                console.log('✨ 3D mascot initialized');
              }

              // Load 2D mascot - matches MascotRenderer.tsx load2DMascot
              async function load2DMascot() {
                container3D.style.display = 'none';
                container2D.style.display = 'block';

                const vw = window.innerWidth;
                const vh = window.innerHeight;
                const dpr = window.devicePixelRatio || 1;

                canvas2D.setAttribute('width', Math.round(vw * dpr).toString());
                canvas2D.setAttribute('height', Math.round(vh * dpr).toString());

                if (!document.querySelector('script[src*="emotive-mascot.umd"]')) {
                  const script = document.createElement('script');
                  script.src = './dist/emotive-mascot.umd.js?v=' + Date.now();
                  script.async = true;
                  document.head.appendChild(script);
                }

                let EmotiveMascotModule;
                try {
                  EmotiveMascotModule = await waitForGlobal('EmotiveMascotLean', 5000);
                } catch {
                  EmotiveMascotModule = await waitForGlobal('EmotiveMascot', 5000);
                }

                const EmotiveMascot = EmotiveMascotModule?.default || EmotiveMascotModule;

                if (!EmotiveMascot || typeof EmotiveMascot !== 'function') {
                  throw new Error('EmotiveMascot class not found');
                }

                const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent);
                const cpuCores = navigator.hardwareConcurrency || 4;
                const isLowEnd = cpuCores <= 4 || isMobile;

                mascot = new EmotiveMascot({
                  canvasId: 'mascot-2d-canvas',
                  targetFPS: isLowEnd ? 30 : 60,
                  enableAudio: false,
                  maxParticles: isLowEnd ? 30 : 80,
                  defaultEmotion: 'neutral',
                  enableGazeTracking: false,
                  enableIdleBehaviors: true,
                });

                await mascot.init(canvas2D);
                mascot.setParticleSystemCanvasDimensions?.(vw, vh);
                mascot.setBackdrop?.({
                  enabled: true,
                  radius: 3.5,
                  intensity: 0.85,
                  blendMode: 'normal',
                  falloff: 'smooth',
                  edgeSoftness: 0.95,
                  coreTransparency: 0.3,
                  responsive: true,
                });
                mascot.setScale?.({ core: 0.8, particles: 1.4 });
                mascot.setPosition?.(isMobile ? 0 : -vw * 0.38, 0, 0);
                mascot.start();
                console.log('✨ 2D mascot initialized');
              }

              // Toggle mode
              async function toggleMode() {
                const newMode = currentMode === '3d' ? '2d' : '3d';
                if (newMode === '3d' && !hasWebGL) return;

                destroyMascot();
                currentMode = newMode;
                storeMode(newMode);
                modeToggle.textContent = newMode === '3d' ? 'Switch to 2D' : 'Switch to 3D';

                loading.style.display = 'block';
                try {
                  if (newMode === '3d') await load3DMascot();
                  else await load2DMascot();
                  loading.style.display = 'none';
                } catch (error) {
                  console.error('Mode switch failed:', error);
                  loading.style.display = 'none';
                  fallback.classList.add('visible');
                }
              }

              // Scroll handler for mascot position - matches page.tsx
              function setupScrollHandler() {
                let ticking = false;
                let rafId = null;

                const updatePosition = () => {
                  if (!mascot) { ticking = false; return; }

                  try {
                    const scrollY = window.scrollY;
                    const vh = window.innerHeight;
                    const vw = window.innerWidth;
                    const isMobile = vw < 768;

                    if (typeof mascot.setPosition === 'function') {
                      const heroTextStart = Math.max(0, (vw - 1000) / 2);
                      const gapCenter = heroTextStart / 2;

                      if (currentMode === '2d') {
                        const baseXOffset = isMobile ? 0 : gapCenter - vw / 2;
                        const yOffset = isMobile
                          ? -vh * 0.25 + scrollY * 0.5
                          : (scrollY - vh * 0.1) * 0.5;
                        const wavelength = 600;
                        const amplitude = isMobile ? Math.min(80, vw * 0.15) : Math.min(100, vw * 0.08);
                        const xOffset = baseXOffset + (amplitude * Math.sin(scrollY / wavelength));
                        mascot.setPosition(xOffset, yOffset, 0);
                      } else {
                        const yOffset = isMobile
                          ? scrollY * 0.4
                          : (scrollY - vh * 0.1) * 0.4;
                        const wavelength = 600;
                        const amplitude = isMobile ? Math.min(60, vw * 0.1) : Math.min(80, vw * 0.06);
                        const xOffset = amplitude * Math.sin(scrollY / wavelength);
                        mascot.setPosition(xOffset, yOffset, 0);
                      }
                    }

                    // Hide mascot after hero
                    const heroHeight = isMobile ? vh * 0.5 : vh * 0.9;
                    const container = currentMode === '3d' ? container3D : container2D;
                    if (scrollY < heroHeight) {
                      container.style.opacity = '1';
                      container.style.visibility = 'visible';
                    } else {
                      container.style.opacity = '0';
                      container.style.visibility = 'hidden';
                    }
                  } catch (e) {
                    console.error('Scroll update error:', e);
                  }
                  ticking = false;
                };

                window.addEventListener('scroll', () => {
                  if (!ticking) {
                    ticking = true;
                    if (rafId !== null) cancelAnimationFrame(rafId);
                    rafId = requestAnimationFrame(updatePosition);
                  }
                }, { passive: true });

                updatePosition();
              }

              // Initialize
              async function init() {
                hasWebGL = checkWebGLSupport();
                const storedMode = getStoredMode();

                // Determine initial mode
                if (storedMode) {
                  currentMode = (storedMode === '3d' && !hasWebGL) ? '2d' : storedMode;
                } else {
                  currentMode = hasWebGL ? '3d' : '2d';
                }

                modeToggle.textContent = currentMode === '3d' ? 'Switch to 2D' : 'Switch to 3D';

                try {
                  if (currentMode === '3d') await load3DMascot();
                  else await load2DMascot();

                  loading.style.display = 'none';
                  if (hasWebGL) modeToggle.style.display = 'block';
                  setupScrollHandler();
                } catch (error) {
                  console.error('Mascot initialization failed:', error);
                  loading.style.display = 'none';
                  container2D.style.display = 'none';
                  container3D.style.display = 'none';
                  fallback.classList.add('visible');
                }
              }

              // Event listeners
              modeToggle.addEventListener('click', toggleMode);

              // Start
              if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
              } else {
                init();
              }
            </script>

            <script>
              // Card mouse tracking for glow effect
              document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('mousemove', (e) => {
                  const rect = card.getBoundingClientRect();
                  const x = ((e.clientX - rect.left) / rect.width) * 100;
                  const y = ((e.clientY - rect.top) / rect.height) * 100;
                  card.style.setProperty('--mouse-x', x + '%');
                  card.style.setProperty('--mouse-y', y + '%');
                });
              });
            </script>
          </body>
          </html>
          INDEXEOF

      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: '_pages'

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
