<!DOCTYPE html>
<!--
  EMOTION DEMO CAPTURE FOR GITHUB README

  Purpose: Generate mobile-friendly demo GIF for Quick Start section
  Layout: Single centered mascot (400x400px - optimized for mobile GitHub)
  Features:
  - Calm emotion with moon morph and breathe gesture
  - Clean composition following rule of thirds
  - Small file size for fast README loading
  - Seamless 8-second loop

  Animation sequence:
  1. Calm (3s)
  2. Moon morph (2s)
  3. Breathe gesture (3s)

  How to capture:
  1. Open this file in Chrome/Edge at 100% zoom
  2. Use ScreenToGif - record exactly 400x400px region
  3. Record for ~8 seconds (1 full loop)
  4. Optimize to ~300-500KB
  5. Save as: assets/emotion-demo.gif
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1500, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Emotive Engine - Emotion Grid</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 400px;
            height: 400px;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #FFFFFF;
        }

        /* Showcase container */
        .showcase-container {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg,
                #0a0a1a 0%,
                #16213e 50%,
                #1a1a2e 100%
            );
            position: relative;
            overflow: visible;  /* Allow glow to extend beyond */
            border: 4px solid #FFFFFF;
            border-radius: 12px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0;  /* Removed padding, canvas now fills container */
        }

        /* Mascot container */
        .mascot-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: visible;  /* Don't clip the glow */
        }

        .mascot-wrapper canvas {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 20px 60px rgba(0, 0, 0, 0.4));
        }

        /* Emotion label */
        .emotion-label {
            position: absolute;
            bottom: 20px;
            font-size: 28px;
            font-weight: 700;
            color: #FFFFFF;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-align: center;
            text-shadow: 0 0 20px rgba(221, 74, 154, 0.8),
                         0 4px 12px rgba(0, 0, 0, 0.6);
            z-index: 20;
        }

        /* Subtle background glow */
        .color-wash {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            pointer-events: none;
            opacity: 0.15;
            z-index: 0;
            filter: blur(120px);
            background: radial-gradient(circle at 50% 50%,
                rgba(221, 74, 154, 0.1) 0%,
                rgba(64, 144, 206, 0.08) 40%,
                rgba(132, 207, 197, 0.05) 70%,
                transparent 100%
            );
        }
    </style>
</head>
<body>
    <div class="showcase-container">
        <div class="color-wash"></div>

        <div class="mascot-wrapper">
            <canvas id="mascot-canvas" width="400" height="400"></canvas>
        </div>

        <div class="emotion-label" id="emotion-label">Neutral</div>
    </div>

    <script src="../site/public/emotive-engine.js"></script>

    <script>
        // Simple animation sequence matching a basic code example
        // Shows: calm -> moon morph -> breathe gesture -> back to circle
        // Doubled duration for better visibility
        const animationSequence = [
            { emotion: 'calm', shape: 'circle', gesture: null, duration: 3000, label: 'Calm' },
            { emotion: 'calm', shape: 'moon', gesture: null, duration: 2000, label: 'Moon' },
            { emotion: 'calm', shape: 'moon', gesture: 'breathe', duration: 3000, label: 'Breathe' }
        ];

        let mascot = null;
        let currentStep = 0;

        // Initialize single mascot
        async function initMascot() {
            const canvas = document.getElementById('mascot-canvas');
            const EmotiveMascot = window.EmotiveMascot?.default || window.EmotiveMascot;

            if (!EmotiveMascot) {
                console.error('EmotiveMascot not found');
                return null;
            }

            // Create mascot instance
            mascot = new EmotiveMascot({
                canvasId: 'mascot-canvas',
                targetFPS: 60,
                enableAudio: false,
                soundEnabled: false,
                maxParticles: 150,
                defaultEmotion: 'neutral',
                enableGazeTracking: false,
                enableIdleBehaviors: false
            });

            await mascot.init(canvas);

            // Set particle system dimensions to match canvas
            mascot.setParticleSystemCanvasDimensions(400, 400);

            // Remove particle containment for full canvas coverage
            mascot.setContainment(null, 2.0);

            // Configure backdrop for depth
            mascot.setBackdrop({
                enabled: true,
                radius: 3.5,  // Full glow now fits within 600x600 canvas
                intensity: 0.9,
                blendMode: 'normal',
                falloff: 'smooth',
                edgeSoftness: 0.95,
                coreTransparency: 0.25,
                responsive: true
            });

            // Scale mascot (optimized for smaller 400x400 canvas)
            mascot.setScale({
                core: 1.5,
                particles: 1.2
            });

            // Center in canvas
            mascot.setPosition(0, 0, 0);

            mascot.start();

            return mascot;
        }

        // Execute animation sequence step by step
        function runSequence() {
            if (!mascot) return;

            const step = animationSequence[currentStep];

            // Update emotion
            mascot.setEmotion(step.emotion);

            // Morph shape if specified
            if (step.shape) {
                setTimeout(() => {
                    mascot.morphTo(step.shape);
                    console.log(`  → Morphing to: ${step.shape}`);
                }, 200);
            }

            // Update label
            const label = document.getElementById('emotion-label');
            if (label) {
                label.textContent = step.label;
            }

            console.log(`Step ${currentStep + 1}: ${step.label}`);

            // Perform gesture if specified
            if (step.gesture) {
                setTimeout(() => {
                    mascot.express(step.gesture);
                    console.log(`  → Performing gesture: ${step.gesture}`);
                }, 400);
            }

            // Move to next step
            currentStep = (currentStep + 1) % animationSequence.length;

            // Schedule next step
            setTimeout(runSequence, step.duration);
        }

        // Initialize and start sequence
        initMascot().then(m => {
            mascot = m;
            if (mascot) {
                console.log('Emotion showcase initialized! Starting animation sequence...');
                // Start sequence after brief delay
                setTimeout(runSequence, 500);
            }
        });
    </script>
</body>
</html>
