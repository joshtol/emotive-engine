<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotive Engine 3D - Three.js Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            width: 100vw;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .app-container {
            display: grid;
            grid-template-rows: auto minmax(400px, 1fr) auto;
            grid-template-columns: 280px 1fr 280px;
            grid-template-areas:
                'header header header'
                'left center right'
                'bottom bottom bottom';
            min-height: 100vh;
            width: 100vw;
        }

        /* Top Bar */
        .top-bar {
            grid-area: header;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        .title {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .title-emoji {
            font-size: 28px;
            margin-right: 10px;
        }

        #status {
            padding: 8px 16px;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid rgba(0, 255, 0, 0.4);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* Center Canvas Area */
        .center {
            grid-area: center;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            min-width: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        #mascot-container {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            aspect-ratio: 1;
            width: min(calc(100% - 40px), calc(100vh - 200px));
            height: min(calc(100% - 40px), calc(100vh - 200px));
            border-radius: 20px;
            background: radial-gradient(circle at center, rgba(100, 100, 255, 0.1), transparent);
            box-shadow: 0 0 100px rgba(100, 100, 255, 0.3);
        }

        #mascot-container canvas {
            border-radius: 20px;
            display: block;
            width: 100%;
            height: 100%;
        }

        /* Center the inner container div created by EmotiveMascot3D */
        #mascot-container > div {
            width: 100% !important;
            height: 100% !important;
            position: relative !important;
        }

        /* Side Panels */
        .left-panel {
            grid-area: left;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            overflow-y: auto;
        }

        .right-panel {
            grid-area: right;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            overflow-y: auto;
        }

        /* Bottom Bar */
        .bottom-bar {
            grid-area: bottom;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            min-height: fit-content;
            overflow: visible;
        }

        /* Control Groups */
        .control-group {
            margin-bottom: 25px;
        }

        .control-group h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            opacity: 0.6;
            margin-bottom: 12px;
            font-weight: 600;
        }

        /* Buttons */
        button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 14px;
            margin: 3px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 13px;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(0);
        }

        button.active {
            background: rgba(100, 200, 255, 0.3);
            border-color: rgba(100, 200, 255, 0.6);
        }

        /* Info Box */
        .info-box {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            font-size: 13px;
            line-height: 1.6;
            margin-top: 20px;
        }

        .info-box strong {
            color: rgba(100, 200, 255, 0.9);
        }

        .info-box ul {
            margin: 10px 0 0 20px;
            list-style: none;
        }

        .info-box ul li:before {
            content: "‚Üí ";
            color: rgba(100, 200, 255, 0.6);
            margin-right: 5px;
        }

        code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .app-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
            }

            .left-panel, .right-panel {
                display: none;
            }

            .center {
                grid-column: 1;
            }

            .top-bar {
                flex-direction: column;
                text-align: center;
            }

            #mascot-container {
                width: 500px;
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            #mascot-container {
                width: 350px;
                height: 350px;
            }

            .title {
                font-size: 20px;
            }

            button {
                font-size: 12px;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Top Bar -->
        <div class="top-bar">
        <div class="title">
            <span class="title-emoji">‚≠ê</span>
            <span>Emotive Engine 3D</span>
        </div>
        <div id="status">Initializing...</div>
    </div>

    <!-- Left Panel: Emotions & Undertones -->
    <div class="left-panel">
        <div class="control-group">
            <h3>Emotions</h3>
            <button data-action="emotion" data-value="joy">üòä Joy</button>
            <button data-action="emotion" data-value="love">‚ù§Ô∏è Love</button>
            <button data-action="emotion" data-value="excited">üéâ Excited</button>
            <button data-action="emotion" data-value="euphoria">‚ú® Euphoria</button>
            <button data-action="emotion" data-value="calm">üòå Calm</button>
            <button data-action="emotion" data-value="focused">üéØ Focused</button>
            <button data-action="emotion" data-value="resting">üò¥ Resting</button>
            <button data-action="emotion" data-value="sadness">üò¢ Sadness</button>
            <button data-action="emotion" data-value="anger">üò† Anger</button>
            <button data-action="emotion" data-value="fear">üò∞ Fear</button>
            <button data-action="emotion" data-value="surprise">üò≤ Surprise</button>
            <button data-action="emotion" data-value="suspicion">ü§® Suspicion</button>
            <button data-action="emotion" data-value="disgust">ü§¢ Disgust</button>
            <button data-action="emotion" data-value="neutral">üòê Neutral</button>
        </div>

        <div class="control-group">
            <h3>Undertones</h3>
            <button data-action="undertone" data-value="null">Clear</button>
            <button data-action="undertone" data-value="subdued">Subdued</button>
            <button data-action="undertone" data-value="tired">Tired</button>
            <button data-action="undertone" data-value="nervous">Nervous</button>
            <button data-action="undertone" data-value="confident">Confident</button>
            <button data-action="undertone" data-value="intense">Intense</button>
            <button data-action="undertone" data-value="energetic">Energetic</button>
        </div>

        <div class="info-box">
            <strong>About Three.js Rendering:</strong>
            <ul>
                <li>Three-point lighting system</li>
                <li>Post-processing bloom effects</li>
                <li>Emotion-based dynamic lighting</li>
                <li>Real-time shadows (optional)</li>
                <li>Custom Fresnel glow shader</li>
            </ul>
        </div>
    </div>

    <!-- Center: 3D Canvas -->
    <div class="center">
        <div id="mascot-container"></div>
    </div>

    <!-- Right Panel: Gestures & Shapes -->
    <div class="right-panel">
        <div class="control-group">
            <h3>Geometries</h3>
            <button data-action="geometry" data-value="sphere">üîÆ Sphere</button>
            <button data-action="geometry" data-value="crystal">üíé Crystal</button>
            <button data-action="geometry" data-value="diamond">üí† Diamond</button>
            <button data-action="geometry" data-value="torus">üç© Torus</button>
            <button data-action="geometry" data-value="icosahedron">‚öΩ Icosahedron</button>
            <button data-action="geometry" data-value="octahedron">üî∂ Octahedron</button>
            <button data-action="geometry" data-value="tetrahedron">üî∫ Tetrahedron</button>
            <button data-action="geometry" data-value="dodecahedron">‚¨° Dodecahedron</button>
        </div>

        <div class="control-group">
            <h3>Animation Toggles</h3>
            <button data-action="toggle-blink" class="active">üëÅÔ∏è Blinking</button>
        </div>

        <div class="control-group">
            <h3>Motion Gestures</h3>
            <button data-action="gesture" data-value="bounce">Bounce</button>
            <button data-action="gesture" data-value="pulse">Pulse</button>
            <button data-action="gesture" data-value="float">Float</button>
            <button data-action="gesture" data-value="shake">Shake</button>
            <button data-action="gesture" data-value="sway">Sway</button>
            <button data-action="gesture" data-value="wiggle">Wiggle</button>
            <button data-action="gesture" data-value="nod">Nod</button>
            <button data-action="gesture" data-value="headBob">Head Bob</button>
            <button data-action="gesture" data-value="orbit">Orbit</button>
            <button data-action="gesture" data-value="jitter">Jitter</button>
            <button data-action="gesture" data-value="twitch">Twitch</button>
            <button data-action="gesture" data-value="vibrate">Vibrate</button>
            <button data-action="gesture" data-value="lean">Lean</button>
            <button data-action="gesture" data-value="point">Point</button>
            <button data-action="gesture" data-value="reach">Reach</button>
        </div>

        <div class="control-group">
            <h3>Transform Gestures</h3>
            <button data-action="gesture" data-value="spin">Spin</button>
            <button data-action="gesture" data-value="tilt">Tilt</button>
            <button data-action="gesture" data-value="jump">Jump</button>
            <button data-action="gesture" data-value="twist">Twist</button>
            <button data-action="gesture" data-value="hula">Hula</button>
            <button data-action="gesture" data-value="orbital">Orbital</button>
            <button data-action="gesture" data-value="scan">Scan</button>
            <button data-action="gesture" data-value="stretch">Stretch</button>
        </div>

        <div class="control-group">
            <h3>Effect Gestures</h3>
            <button data-action="gesture" data-value="wave">Wave</button>
            <button data-action="gesture" data-value="flash">Flash</button>
            <button data-action="gesture" data-value="glow">Glow</button>
            <button data-action="gesture" data-value="breathe">Breathe</button>
            <button data-action="gesture" data-value="drift">Drift</button>
            <button data-action="gesture" data-value="burst">Burst</button>
            <button data-action="gesture" data-value="flicker">Flicker</button>
            <button data-action="gesture" data-value="fade">Fade</button>
        </div>

        <div class="info-box">
            <strong>Bundle Size:</strong><br>
            <code>669 KB</code> (~160 KB gzipped)<br>
            <small style="opacity: 0.6;">Includes Three.js + post-processing</small>
        </div>
    </div>

        <!-- Bottom Bar: Combo Chains -->
        <div class="bottom-bar">
        <div class="control-group" style="margin: 0;">
            <h3 style="margin-bottom: 8px;">Combo Chains</h3>
            <button data-action="chain" data-value="rise">Rise</button>
            <button data-action="chain" data-value="flow">Flow</button>
            <button data-action="chain" data-value="burst">Burst</button>
            <button data-action="chain" data-value="drift">Drift</button>
            <button data-action="chain" data-value="chaos">Chaos</button>
            <button data-action="chain" data-value="morph">Morph</button>
            <button data-action="chain" data-value="rhythm">Rhythm</button>
            <button data-action="chain" data-value="spiral">Spiral</button>
            <button data-action="chain" data-value="routine">Routine</button>
            <button data-action="chain" data-value="radiance">Radiance</button>
            <button data-action="chain" data-value="twinkle">Twinkle</button>
            <button data-action="chain" data-value="stream">Stream</button>
        </div>
        </div>
    </div>

    <script type="module">
        import { EmotiveMascot3D } from '../dist/emotive-mascot-3d.js?v=9';

        let mascot = null;

        // Initialize 3D mascot
        (async () => {
            try {
                const container = document.getElementById('mascot-container');
                mascot = new EmotiveMascot3D({
                    coreGeometry: 'crystal',
                    enableParticles: true,
                    enablePostProcessing: true,
                    enableShadows: false
                });

                mascot.init(container);
                mascot.start();

                // Set initial emotion
                mascot.setEmotion('joy');

                document.getElementById('status').textContent = '‚úÖ Ready';
                document.getElementById('status').style.background = 'rgba(0, 255, 0, 0.2)';

                console.log('‚úÖ EmotiveMascot3D initialized');
            } catch (error) {
                console.error('Failed to initialize:', error);
                document.getElementById('status').textContent = '‚ùå Error';
                document.getElementById('status').style.background = 'rgba(255, 0, 0, 0.2)';
            }
        })();

        // Event delegation for all buttons
        document.addEventListener('click', (e) => {
            if (!e.target.matches('button[data-action]') || !mascot) return;

            const action = e.target.dataset.action;
            const value = e.target.dataset.value;

            // Update active state for emotion buttons
            if (action === 'emotion') {
                document.querySelectorAll('[data-action="emotion"]').forEach(btn => {
                    btn.classList.remove('active');
                });
                e.target.classList.add('active');
            }

            try {
                switch (action) {
                    case 'geometry':
                        console.log('Morphing to:', value);
                        mascot.morphTo(value);
                        break;

                    case 'emotion':
                        console.log('Setting emotion:', value);
                        mascot.setEmotion(value);
                        break;

                    case 'gesture':
                        console.log('Playing gesture:', value);
                        mascot.express(value);
                        break;

                    case 'undertone':
                        const undertone = value === 'null' ? null : value;
                        console.log('Setting undertone:', undertone);
                        mascot.updateUndertone(undertone);
                        break;

                    case 'chain':
                        console.log('Playing chain combo:', value);
                        if (mascot.chain) {
                            mascot.chain(value);
                        } else {
                            console.warn('chain() method not yet implemented in 3D engine');
                        }
                        break;

                    case 'toggle-blink':
                        if (mascot.blinkingEnabled) {
                            console.log('Disabling blinking');
                            mascot.disableBlinking();
                            e.target.classList.remove('active');
                        } else {
                            console.log('Enabling blinking');
                            mascot.enableBlinking();
                            e.target.classList.add('active');
                        }
                        break;
                }
            } catch (error) {
                console.error('Action failed:', error);
            }
        });

        // Set initial active button
        document.querySelector('[data-value="joy"]').classList.add('active');
    </script>
</body>
</html>
